<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Climate data analysis | Google Earth Engine workshop</title>
  <meta name="description" content="Manual and code for Philip’s Google Earth Engine workshop" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Climate data analysis | Google Earth Engine workshop" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://kraaijenbrink.github.io/earthengine-workshop" />
  
  <meta property="og:description" content="Manual and code for Philip’s Google Earth Engine workshop" />
  <meta name="github-repo" content="kraaijenbrink/earthengine-workshop" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Climate data analysis | Google Earth Engine workshop" />
  
  <meta name="twitter:description" content="Manual and code for Philip’s Google Earth Engine workshop" />
  

<meta name="author" content="Philip Kraaijenbrink" />


<meta name="date" content="2020-10-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="regression.html"/>
<link rel="next" href="additional-cases.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#earth-engine-access"><i class="fa fa-check"></i>Earth Engine access</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#earth-engine-help"><i class="fa fa-check"></i>Earth Engine help</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#workshop-code"><i class="fa fa-check"></i>Workshop code</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#source"><i class="fa fa-check"></i>Source</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="image-classification.html"><a href="image-classification.html"><i class="fa fa-check"></i><b>1</b> Image classification</a>
<ul>
<li class="chapter" data-level="1.1" data-path="image-classification.html"><a href="image-classification.html#define-input-data"><i class="fa fa-check"></i><b>1.1</b> Define input data</a></li>
<li class="chapter" data-level="1.2" data-path="image-classification.html"><a href="image-classification.html#obtain-training-data"><i class="fa fa-check"></i><b>1.2</b> Obtain training data</a></li>
<li class="chapter" data-level="1.3" data-path="image-classification.html"><a href="image-classification.html#classify-image"><i class="fa fa-check"></i><b>1.3</b> Classify image</a></li>
<li class="chapter" data-level="1.4" data-path="image-classification.html"><a href="image-classification.html#visualize-using-charts"><i class="fa fa-check"></i><b>1.4</b> Visualize using charts</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="quality-mosaicking.html"><a href="quality-mosaicking.html"><i class="fa fa-check"></i><b>2</b> Quality mosaicking</a>
<ul>
<li class="chapter" data-level="2.1" data-path="quality-mosaicking.html"><a href="quality-mosaicking.html#define-input-data-1"><i class="fa fa-check"></i><b>2.1</b> Define input data</a></li>
<li class="chapter" data-level="2.2" data-path="quality-mosaicking.html"><a href="quality-mosaicking.html#mask-clouds-and-calculate-index"><i class="fa fa-check"></i><b>2.2</b> Mask clouds and calculate index</a></li>
<li class="chapter" data-level="2.3" data-path="quality-mosaicking.html"><a href="quality-mosaicking.html#quality-mosaic-composite"><i class="fa fa-check"></i><b>2.3</b> Quality mosaic composite</a></li>
<li class="chapter" data-level="2.4" data-path="quality-mosaicking.html"><a href="quality-mosaicking.html#classify-water"><i class="fa fa-check"></i><b>2.4</b> Classify water</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="regression.html"><a href="regression.html"><i class="fa fa-check"></i><b>3</b> Regression</a>
<ul>
<li class="chapter" data-level="3.1" data-path="regression.html"><a href="regression.html#settings-and-data"><i class="fa fa-check"></i><b>3.1</b> Settings and data</a></li>
<li class="chapter" data-level="3.2" data-path="regression.html"><a href="regression.html#derive-annual-composites"><i class="fa fa-check"></i><b>3.2</b> Derive annual composites</a></li>
<li class="chapter" data-level="3.3" data-path="regression.html"><a href="regression.html#calculate-temporal-trend"><i class="fa fa-check"></i><b>3.3</b> Calculate temporal trend</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="climate-data-analysis.html"><a href="climate-data-analysis.html"><i class="fa fa-check"></i><b>4</b> Climate data analysis</a>
<ul>
<li class="chapter" data-level="4.1" data-path="climate-data-analysis.html"><a href="climate-data-analysis.html#define-input-data-2"><i class="fa fa-check"></i><b>4.1</b> Define input data</a></li>
<li class="chapter" data-level="4.2" data-path="climate-data-analysis.html"><a href="climate-data-analysis.html#estimate-mean-temperature"><i class="fa fa-check"></i><b>4.2</b> Estimate mean temperature</a></li>
<li class="chapter" data-level="4.3" data-path="climate-data-analysis.html"><a href="climate-data-analysis.html#determine-relative-change"><i class="fa fa-check"></i><b>4.3</b> Determine relative change</a></li>
<li class="chapter" data-level="4.4" data-path="climate-data-analysis.html"><a href="climate-data-analysis.html#make-charts"><i class="fa fa-check"></i><b>4.4</b> Make charts</a></li>
<li class="chapter" data-level="4.5" data-path="climate-data-analysis.html"><a href="climate-data-analysis.html#end-of-century-climatology"><i class="fa fa-check"></i><b>4.5</b> End of century climatology</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="additional-cases.html"><a href="additional-cases.html"><i class="fa fa-check"></i>Additional cases</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Google Earth Engine workshop</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="climate-data-analysis" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Climate data analysis</h1>
<p><img src="figures/banner_4.jpg" /></p>
<p><strong>Examine the expected global temperature rise and precipitation changes in the 21st century, aggregate them by country and make a simple global climate change classification.</strong></p>
<div id="define-input-data-2" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Define input data</h2>
<p>For this you will use yearly ensemble aggregates of the <a href="https://nex.nasa.gov/nex/projects/1356/">NEX-GDDP dataset</a>, which is downscaled <a href="https://en.wikipedia.org/wiki/Coupled_model_intercomparison_project">CMIP5</a> climate model data. The NEX-GDDP dataset includes daily projections for <a href="https://en.wikipedia.org/wiki/Representative_Concentration_Pathways">RCP4.5 and RCP8.5</a> from 21 Global Circulation Models within CMIP5. The projections include daily minimum temperature, maximum temperature and precipitation for the period 1950–2099. The spatial resolution of the NEX-GDDP dataset is 0.25 degrees (approximately 27 by 27 km at the equator). The original NEX-GDDP data is present in the Earth Engine catalog. For the purpose of this exercise, however, I have pre-aggregated it to yearly data and calculated model ensemble statistics using Google Earth Engine’s computing power.</p>
<p>Load the pre-aggregated NEX-GDDP data, MODIS water mask and custom code:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb28-1"><a href="climate-data-analysis.html#cb28-1"></a><span class="co">// load data</span></span>
<span id="cb28-2"><a href="climate-data-analysis.html#cb28-2"></a><span class="kw">var</span> nexy  <span class="op">=</span> ee<span class="op">.</span><span class="fu">ImageCollection</span>(<span class="st">&#39;users/philipkraaijenbrink/climate-data/nex-gddp-yearly-stats&#39;</span>)</span>
<span id="cb28-3"><a href="climate-data-analysis.html#cb28-3"></a><span class="kw">var</span> wmask <span class="op">=</span> ee<span class="op">.</span><span class="fu">Image</span>(<span class="st">&#39;MODIS/MOD44W/MOD44W_005_2000_02_24&#39;</span>)<span class="op">.</span><span class="fu">select</span>(<span class="st">&#39;water_mask&#39;</span>)</span>
<span id="cb28-4"><a href="climate-data-analysis.html#cb28-4"></a></span>
<span id="cb28-5"><a href="climate-data-analysis.html#cb28-5"></a><span class="co">// load custom code</span></span>
<span id="cb28-6"><a href="climate-data-analysis.html#cb28-6"></a><span class="kw">var</span> lg <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;users/philipkraaijenbrink/tools:legends&#39;</span>)</span>
<span id="cb28-7"><a href="climate-data-analysis.html#cb28-7"></a><span class="kw">var</span> cp <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;users/philipkraaijenbrink/tools:colorpals&#39;</span>)</span></code></pre></div>
</div>
<div id="estimate-mean-temperature" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Estimate mean temperature</h2>
<p>Unfortunately, the NEX-GDDP dataset only has minimum and maximum daily temperatures (<em>tasmin</em>, <em>tasmax</em>). For most climate analyses mean daily temperature is used, so you will need to approximate the mean temperature as the average of <em>tasmin</em> and <em>tasmax.</em> Note that this is not accurate and that large deviations are expected, both in space and time. For the purpose of this exercise, however, it will suffice.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb29-1"><a href="climate-data-analysis.html#cb29-1"></a><span class="co">// approximate mean temperature above surface for RCP45 and RCP85,</span></span>
<span id="cb29-2"><a href="climate-data-analysis.html#cb29-2"></a><span class="co">// and store as multiband band image together with precipitation</span></span>
<span id="cb29-3"><a href="climate-data-analysis.html#cb29-3"></a><span class="kw">var</span> start <span class="op">=</span> <span class="dv">2006</span>              <span class="co">// 2006 is start of future for CMIP5</span></span>
<span id="cb29-4"><a href="climate-data-analysis.html#cb29-4"></a><span class="kw">var</span> end   <span class="op">=</span> <span class="dv">2099</span></span>
<span id="cb29-5"><a href="climate-data-analysis.html#cb29-5"></a><span class="kw">var</span> absstack <span class="op">=</span> ee<span class="op">.</span><span class="at">ImageCollection</span><span class="op">.</span><span class="fu">fromImages</span>(ee<span class="op">.</span><span class="at">List</span><span class="op">.</span><span class="fu">sequence</span>(start<span class="op">,</span>end)<span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(i){</span>
<span id="cb29-6"><a href="climate-data-analysis.html#cb29-6"></a>  i <span class="op">=</span> ee<span class="op">.</span><span class="fu">Number</span>(i)</span>
<span id="cb29-7"><a href="climate-data-analysis.html#cb29-7"></a>  <span class="kw">var</span> curdat <span class="op">=</span> nexy<span class="op">.</span><span class="fu">filterDate</span>(ee<span class="op">.</span><span class="at">Date</span><span class="op">.</span><span class="fu">fromYMD</span>(i<span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">1</span>)<span class="op">,</span>ee<span class="op">.</span><span class="at">Date</span><span class="op">.</span><span class="fu">fromYMD</span>(i<span class="op">,</span><span class="dv">12</span><span class="op">,</span><span class="dv">31</span>))</span>
<span id="cb29-8"><a href="climate-data-analysis.html#cb29-8"></a>  <span class="kw">var</span> t45  <span class="op">=</span> curdat<span class="op">.</span><span class="fu">filter</span>(ee<span class="op">.</span><span class="at">Filter</span><span class="op">.</span><span class="fu">eq</span>(<span class="st">&#39;scenario&#39;</span><span class="op">,</span><span class="st">&#39;rcp45&#39;</span>))<span class="op">.</span><span class="fu">first</span>()</span>
<span id="cb29-9"><a href="climate-data-analysis.html#cb29-9"></a>                    <span class="op">.</span><span class="fu">select</span>([<span class="st">&#39;tasmin_mean&#39;</span><span class="op">,</span><span class="st">&#39;tasmax_mean&#39;</span>])</span>
<span id="cb29-10"><a href="climate-data-analysis.html#cb29-10"></a>                    <span class="op">.</span><span class="fu">reduce</span>(ee<span class="op">.</span><span class="at">Reducer</span><span class="op">.</span><span class="fu">mean</span>())</span>
<span id="cb29-11"><a href="climate-data-analysis.html#cb29-11"></a>                    <span class="op">.</span><span class="fu">rename</span>(<span class="st">&#39;tas45&#39;</span>)</span>
<span id="cb29-12"><a href="climate-data-analysis.html#cb29-12"></a>  <span class="kw">var</span> t85  <span class="op">=</span> curdat<span class="op">.</span><span class="fu">filter</span>(ee<span class="op">.</span><span class="at">Filter</span><span class="op">.</span><span class="fu">eq</span>(<span class="st">&#39;scenario&#39;</span><span class="op">,</span><span class="st">&#39;rcp85&#39;</span>))<span class="op">.</span><span class="fu">first</span>()</span>
<span id="cb29-13"><a href="climate-data-analysis.html#cb29-13"></a>                    <span class="op">.</span><span class="fu">select</span>([<span class="st">&#39;tasmin_mean&#39;</span><span class="op">,</span><span class="st">&#39;tasmax_mean&#39;</span>])</span>
<span id="cb29-14"><a href="climate-data-analysis.html#cb29-14"></a>                    <span class="op">.</span><span class="fu">reduce</span>(ee<span class="op">.</span><span class="at">Reducer</span><span class="op">.</span><span class="fu">mean</span>())</span>
<span id="cb29-15"><a href="climate-data-analysis.html#cb29-15"></a>                    <span class="op">.</span><span class="fu">rename</span>(<span class="st">&#39;tas85&#39;</span>)</span>
<span id="cb29-16"><a href="climate-data-analysis.html#cb29-16"></a>  <span class="kw">var</span> p45  <span class="op">=</span> curdat<span class="op">.</span><span class="fu">filter</span>(ee<span class="op">.</span><span class="at">Filter</span><span class="op">.</span><span class="fu">eq</span>(<span class="st">&#39;scenario&#39;</span><span class="op">,</span><span class="st">&#39;rcp45&#39;</span>))<span class="op">.</span><span class="fu">first</span>()</span>
<span id="cb29-17"><a href="climate-data-analysis.html#cb29-17"></a>                    <span class="op">.</span><span class="fu">select</span>([<span class="st">&#39;pr_mean&#39;</span>])<span class="op">.</span><span class="fu">rename</span>(<span class="st">&#39;pr45&#39;</span>)</span>
<span id="cb29-18"><a href="climate-data-analysis.html#cb29-18"></a>  <span class="kw">var</span> p85  <span class="op">=</span> curdat<span class="op">.</span><span class="fu">filter</span>(ee<span class="op">.</span><span class="at">Filter</span><span class="op">.</span><span class="fu">eq</span>(<span class="st">&#39;scenario&#39;</span><span class="op">,</span><span class="st">&#39;rcp85&#39;</span>))<span class="op">.</span><span class="fu">first</span>()</span>
<span id="cb29-19"><a href="climate-data-analysis.html#cb29-19"></a>                    <span class="op">.</span><span class="fu">select</span>([<span class="st">&#39;pr_mean&#39;</span>])<span class="op">.</span><span class="fu">rename</span>(<span class="st">&#39;pr85&#39;</span>)                         </span>
<span id="cb29-20"><a href="climate-data-analysis.html#cb29-20"></a>  <span class="kw">var</span> stack  <span class="op">=</span> ee<span class="op">.</span><span class="fu">Image</span>([t45<span class="op">,</span>t85<span class="op">,</span>p45<span class="op">,</span>p85])<span class="op">.</span><span class="fu">set</span>(<span class="st">&#39;system:time_start&#39;</span><span class="op">,</span> ee<span class="op">.</span><span class="at">Date</span><span class="op">.</span><span class="fu">fromYMD</span>(i<span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">1</span>))</span>
<span id="cb29-21"><a href="climate-data-analysis.html#cb29-21"></a>  <span class="cf">return</span> stack<span class="op">.</span><span class="fu">updateMask</span>(wmask<span class="op">.</span><span class="fu">eq</span>(<span class="dv">0</span>))      <span class="co">// limit the analysis to land masses</span></span>
<span id="cb29-22"><a href="climate-data-analysis.html#cb29-22"></a>}))</span></code></pre></div>
<p> </p>
</div>
<div id="determine-relative-change" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Determine relative change</h2>
<p>To estimate climate changes that may occur over the course of the 21st century you will need to determine the difference of each year with the climate at the beginning of the century, i.e. the reference climate. It is best practice to determine the difference with a multi-year reference climatology, but for the sake of this exercise you will simply use the first year.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb30-1"><a href="climate-data-analysis.html#cb30-1"></a><span class="co">// for each image determine the relative difference with first timestep to get delta T and delta P</span></span>
<span id="cb30-2"><a href="climate-data-analysis.html#cb30-2"></a><span class="kw">var</span> relstack <span class="op">=</span> absstack<span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(x){</span>
<span id="cb30-3"><a href="climate-data-analysis.html#cb30-3"></a>  <span class="kw">var</span> baseval  <span class="op">=</span> absstack<span class="op">.</span><span class="fu">filterDate</span>(ee<span class="op">.</span><span class="at">Date</span><span class="op">.</span><span class="fu">fromYMD</span>(start<span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">1</span>)<span class="op">,</span></span>
<span id="cb30-4"><a href="climate-data-analysis.html#cb30-4"></a>                                     ee<span class="op">.</span><span class="at">Date</span><span class="op">.</span><span class="fu">fromYMD</span>(start<span class="op">,</span><span class="dv">12</span><span class="op">,</span><span class="dv">31</span>))</span>
<span id="cb30-5"><a href="climate-data-analysis.html#cb30-5"></a>                         <span class="op">.</span><span class="fu">first</span>()</span>
<span id="cb30-6"><a href="climate-data-analysis.html#cb30-6"></a>  <span class="kw">var</span> deltatas <span class="op">=</span> x<span class="op">.</span><span class="fu">select</span>([<span class="st">&quot;tas45&quot;</span><span class="op">,</span><span class="st">&quot;tas85&quot;</span>])</span>
<span id="cb30-7"><a href="climate-data-analysis.html#cb30-7"></a>                  <span class="op">.</span><span class="fu">subtract</span>(baseval<span class="op">.</span><span class="fu">select</span>([<span class="st">&quot;tas45&quot;</span><span class="op">,</span><span class="st">&quot;tas85&quot;</span>]))     <span class="co">// dT (K)</span></span>
<span id="cb30-8"><a href="climate-data-analysis.html#cb30-8"></a>  <span class="kw">var</span> deltapr  <span class="op">=</span> x<span class="op">.</span><span class="fu">select</span>([<span class="st">&quot;pr45&quot;</span><span class="op">,</span><span class="st">&quot;pr85&quot;</span>])</span>
<span id="cb30-9"><a href="climate-data-analysis.html#cb30-9"></a>                  <span class="op">.</span><span class="fu">subtract</span>(baseval<span class="op">.</span><span class="fu">select</span>([<span class="st">&quot;pr45&quot;</span><span class="op">,</span><span class="st">&quot;pr85&quot;</span>]))     </span>
<span id="cb30-10"><a href="climate-data-analysis.html#cb30-10"></a>                  <span class="op">.</span><span class="fu">divide</span>(x<span class="op">.</span><span class="fu">select</span>([<span class="st">&quot;pr45&quot;</span><span class="op">,</span><span class="st">&quot;pr85&quot;</span>]))<span class="op">.</span><span class="fu">multiply</span>(<span class="dv">100</span>) <span class="co">// dP (%)</span></span>
<span id="cb30-11"><a href="climate-data-analysis.html#cb30-11"></a>  <span class="cf">return</span> ee<span class="op">.</span><span class="fu">Image</span>([deltatas<span class="op">,</span>deltapr])</span>
<span id="cb30-12"><a href="climate-data-analysis.html#cb30-12"></a>           <span class="op">.</span><span class="fu">set</span>(<span class="st">&#39;system:time_start&#39;</span><span class="op">,</span> x<span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;system:time_start&#39;</span>))</span>
<span id="cb30-13"><a href="climate-data-analysis.html#cb30-13"></a>})</span></code></pre></div>
<p> </p>
</div>
<div id="make-charts" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Make charts</h2>
<p>You can now create charts of global temperature and precipitation changes relative to 2006 for the two climate scenarios. Add the code below and press run.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb31-1"><a href="climate-data-analysis.html#cb31-1"></a><span class="co">// make charts with global average relative climate change for land masses</span></span>
<span id="cb31-2"><a href="climate-data-analysis.html#cb31-2"></a><span class="kw">var</span> glob <span class="op">=</span> ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">Polygon</span>([<span class="op">-</span><span class="dv">180</span><span class="op">,-</span><span class="dv">85</span><span class="op">,</span><span class="dv">180</span><span class="op">,-</span><span class="dv">85</span><span class="op">,</span><span class="dv">180</span><span class="op">,</span><span class="dv">85</span><span class="op">,-</span><span class="dv">180</span><span class="op">,</span><span class="dv">85</span><span class="op">,-</span><span class="dv">180</span><span class="op">,-</span><span class="dv">85</span>]<span class="op">,</span></span>
<span id="cb31-3"><a href="climate-data-analysis.html#cb31-3"></a>                               <span class="st">&#39;EPSG:4326&#39;</span><span class="op">,</span></span>
<span id="cb31-4"><a href="climate-data-analysis.html#cb31-4"></a>                               <span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb31-5"><a href="climate-data-analysis.html#cb31-5"></a><span class="kw">var</span> tchart <span class="op">=</span> ui<span class="op">.</span><span class="at">Chart</span><span class="op">.</span><span class="at">image</span><span class="op">.</span><span class="fu">series</span>(</span>
<span id="cb31-6"><a href="climate-data-analysis.html#cb31-6"></a>                 relstack<span class="op">.</span><span class="fu">select</span>([<span class="st">&#39;tas45&#39;</span><span class="op">,</span><span class="st">&#39;tas85&#39;</span>])<span class="op">,</span></span>
<span id="cb31-7"><a href="climate-data-analysis.html#cb31-7"></a>                 glob<span class="op">,</span></span>
<span id="cb31-8"><a href="climate-data-analysis.html#cb31-8"></a>                 ee<span class="op">.</span><span class="at">Reducer</span><span class="op">.</span><span class="fu">mean</span>()<span class="op">,</span></span>
<span id="cb31-9"><a href="climate-data-analysis.html#cb31-9"></a>                 <span class="dv">50000</span></span>
<span id="cb31-10"><a href="climate-data-analysis.html#cb31-10"></a>               )</span>
<span id="cb31-11"><a href="climate-data-analysis.html#cb31-11"></a>               <span class="op">.</span><span class="fu">setChartType</span>(<span class="st">&#39;LineChart&#39;</span>)</span>
<span id="cb31-12"><a href="climate-data-analysis.html#cb31-12"></a>               <span class="op">.</span><span class="fu">setOptions</span>({<span class="dt">lineWidth</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span> <span class="dt">colors</span><span class="op">:</span> [<span class="st">&#39;6b93ce&#39;</span><span class="op">,</span><span class="st">&#39;af6262&#39;</span>]})<span class="op">;</span></span>
<span id="cb31-13"><a href="climate-data-analysis.html#cb31-13"></a><span class="kw">var</span> pchart <span class="op">=</span> ui<span class="op">.</span><span class="at">Chart</span><span class="op">.</span><span class="at">image</span><span class="op">.</span><span class="fu">series</span>(</span>
<span id="cb31-14"><a href="climate-data-analysis.html#cb31-14"></a>                 relstack<span class="op">.</span><span class="fu">select</span>([<span class="st">&#39;pr45&#39;</span><span class="op">,</span><span class="st">&#39;pr85&#39;</span>])<span class="op">,</span></span>
<span id="cb31-15"><a href="climate-data-analysis.html#cb31-15"></a>                 glob<span class="op">,</span></span>
<span id="cb31-16"><a href="climate-data-analysis.html#cb31-16"></a>                 ee<span class="op">.</span><span class="at">Reducer</span><span class="op">.</span><span class="fu">mean</span>()<span class="op">,</span></span>
<span id="cb31-17"><a href="climate-data-analysis.html#cb31-17"></a>                 <span class="dv">50000</span></span>
<span id="cb31-18"><a href="climate-data-analysis.html#cb31-18"></a>              )</span>
<span id="cb31-19"><a href="climate-data-analysis.html#cb31-19"></a>              <span class="op">.</span><span class="fu">setChartType</span>(<span class="st">&#39;LineChart&#39;</span>)</span>
<span id="cb31-20"><a href="climate-data-analysis.html#cb31-20"></a>              <span class="op">.</span><span class="fu">setOptions</span>({<span class="dt">lineWidth</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span> <span class="dt">colors</span><span class="op">:</span> [<span class="st">&#39;6b93ce&#39;</span><span class="op">,</span><span class="st">&#39;af6262&#39;</span>]})<span class="op">;</span></span>
<span id="cb31-21"><a href="climate-data-analysis.html#cb31-21"></a>print(tchart)<span class="op">;</span></span>
<span id="cb31-22"><a href="climate-data-analysis.html#cb31-22"></a>print(pchart)<span class="op">;</span></span></code></pre></div>
<p> </p>
<p>To show a graph of the absolute mean temperature and precipitation over the period 2006–2099 you could change the data that is plotted by changing relstack to absstack in the above code.</p>
</div>
<div id="end-of-century-climatology" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> End of century climatology</h2>
<p>Future climate projections are often analysed for specific points in the future instead of transient data. Examples are middle of century (MOC) or end of century (EOC). To limit effects of interannual variability in the data, these points are calculated as climatologies of multiple years. EOC is therefore not just the year 2099, but the mean of 2071–2100.</p>
<p>Calculate the average change in temperature and precipitation for the EOC, add the resulting images for RCP8.5 scenario to the map and inspect the results.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb32-1"><a href="climate-data-analysis.html#cb32-1"></a><span class="co">// get end of century (EOC) climatology</span></span>
<span id="cb32-2"><a href="climate-data-analysis.html#cb32-2"></a><span class="kw">var</span> eocmean <span class="op">=</span> relstack<span class="op">.</span><span class="fu">filterDate</span>(<span class="st">&#39;2071-01-01&#39;</span><span class="op">,</span><span class="st">&#39;2099-12-31&#39;</span>)<span class="op">.</span><span class="fu">mean</span>()</span>
<span id="cb32-3"><a href="climate-data-analysis.html#cb32-3"></a> </span>
<span id="cb32-4"><a href="climate-data-analysis.html#cb32-4"></a><span class="co">// define color palettes to use for tas and pr</span></span>
<span id="cb32-5"><a href="climate-data-analysis.html#cb32-5"></a><span class="kw">var</span> tcol <span class="op">=</span> cp<span class="op">.</span><span class="fu">getPalette</span>(<span class="st">&#39;InfernoMPL&#39;</span><span class="op">,</span><span class="dv">9</span>)</span>
<span id="cb32-6"><a href="climate-data-analysis.html#cb32-6"></a><span class="kw">var</span> pcol <span class="op">=</span> cp<span class="op">.</span><span class="fu">getPalette</span>(<span class="st">&#39;RdBu&#39;</span><span class="op">,</span><span class="dv">5</span>)</span>
<span id="cb32-7"><a href="climate-data-analysis.html#cb32-7"></a> </span>
<span id="cb32-8"><a href="climate-data-analysis.html#cb32-8"></a><span class="co">// add eoc stats to map</span></span>
<span id="cb32-9"><a href="climate-data-analysis.html#cb32-9"></a><span class="bu">Map</span><span class="op">.</span><span class="fu">addLayer</span>(eocmean<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;tas85&quot;</span>)<span class="op">,</span> {<span class="dt">min</span><span class="op">:</span><span class="dv">0</span><span class="op">,</span> <span class="dt">max</span><span class="op">:</span><span class="dv">8</span><span class="op">,</span> <span class="dt">palette</span><span class="op">:</span> tcol}<span class="op">,</span> <span class="st">&#39;RCP85 dT EOC (K)&#39;</span>)</span>
<span id="cb32-10"><a href="climate-data-analysis.html#cb32-10"></a><span class="bu">Map</span><span class="op">.</span><span class="fu">addLayer</span>(eocmean<span class="op">.</span><span class="fu">select</span>(<span class="st">&quot;pr85&quot;</span>)<span class="op">,</span>  {<span class="dt">min</span><span class="op">:-</span><span class="dv">100</span><span class="op">,</span> <span class="dt">max</span><span class="op">:</span><span class="dv">100</span><span class="op">,</span> <span class="dt">palette</span><span class="op">:</span> pcol}<span class="op">,</span> <span class="st">&#39;RCP85 dP EOC (%)&#39;</span>)</span>
<span id="cb32-11"><a href="climate-data-analysis.html#cb32-11"></a> </span>
<span id="cb32-12"><a href="climate-data-analysis.html#cb32-12"></a><span class="co">// add legends to the map</span></span>
<span id="cb32-13"><a href="climate-data-analysis.html#cb32-13"></a>lg<span class="op">.</span><span class="fu">rampLegend</span>(tcol<span class="op">,</span> <span class="dv">0</span><span class="op">,</span><span class="dv">8</span><span class="op">,</span> <span class="st">&#39;dT EOC (K)&#39;</span>)</span>
<span id="cb32-14"><a href="climate-data-analysis.html#cb32-14"></a>lg<span class="op">.</span><span class="fu">rampLegend</span>(pcol<span class="op">,</span> <span class="dv">-100</span><span class="op">,</span> <span class="dv">100</span><span class="op">,</span> <span class="st">&#39;dP EOC (%)&#39;</span>)</span></code></pre></div>
<p> </p>
<p>To get a sense of climate change impacts in European countries, aggregate the temperature change results by using country polygons. A country dataset is already available in the Earth Engine catalog (Large Scale International Boundaries from the United States Office of the Geographer).</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb33-1"><a href="climate-data-analysis.html#cb33-1"></a><span class="co">// get warming per country and add to map</span></span>
<span id="cb33-2"><a href="climate-data-analysis.html#cb33-2"></a><span class="kw">var</span> countries <span class="op">=</span> ee<span class="op">.</span><span class="fu">FeatureCollection</span>(<span class="st">&#39;USDOS/LSIB_SIMPLE/2017&#39;</span>)</span>
<span id="cb33-3"><a href="climate-data-analysis.html#cb33-3"></a>countries <span class="op">=</span> countries<span class="op">.</span><span class="fu">filter</span>(ee<span class="op">.</span><span class="at">Filter</span><span class="op">.</span><span class="fu">eq</span>(<span class="st">&#39;wld_rgn&#39;</span><span class="op">,</span><span class="st">&#39;Europe&#39;</span>))</span>
<span id="cb33-4"><a href="climate-data-analysis.html#cb33-4"></a><span class="kw">var</span> countrydeltas <span class="op">=</span> eocmean<span class="op">.</span><span class="fu">reduceRegions</span>(countries<span class="op">,</span>ee<span class="op">.</span><span class="at">Reducer</span><span class="op">.</span><span class="fu">mean</span>()<span class="op">,</span><span class="dv">50000</span>)</span>
<span id="cb33-5"><a href="climate-data-analysis.html#cb33-5"></a><span class="kw">var</span> dTcountry <span class="op">=</span> ee<span class="op">.</span><span class="fu">Image</span>()<span class="op">.</span><span class="fu">float</span>()<span class="op">.</span><span class="fu">paint</span>(countrydeltas<span class="op">,</span><span class="st">&#39;tas85&#39;</span>)  <span class="co">// paint poly fill on empty image</span></span>
<span id="cb33-6"><a href="climate-data-analysis.html#cb33-6"></a><span class="kw">var</span> borders   <span class="op">=</span> ee<span class="op">.</span><span class="fu">Image</span>()<span class="op">.</span><span class="fu">byte</span>()<span class="op">.</span><span class="fu">paint</span>(countries<span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span>)   <span class="co">// paint country borders on empty image</span></span>
<span id="cb33-7"><a href="climate-data-analysis.html#cb33-7"></a><span class="bu">Map</span><span class="op">.</span><span class="fu">addLayer</span>(dTcountry<span class="op">,</span> {<span class="dt">min</span><span class="op">:</span><span class="dv">0</span><span class="op">,</span> <span class="dt">max</span><span class="op">:</span><span class="dv">8</span><span class="op">,</span> <span class="dt">palette</span><span class="op">:</span> tcol}<span class="op">,</span> <span class="st">&#39;dT EOC countries&#39;</span>)</span>
<span id="cb33-8"><a href="climate-data-analysis.html#cb33-8"></a><span class="bu">Map</span><span class="op">.</span><span class="fu">addLayer</span>(borders<span class="op">,</span>{}<span class="op">,</span><span class="st">&#39;Country borders&#39;</span>)</span></code></pre></div>
<p> </p>
<p>Finally, make a simple classification of global climate change, given the RCP8.5 scenario. Use four classes: (1) dryer and above average warming, (2) dryer and below average warming, (3) wetter and above average warming, (4) wetter and below average warming.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb34-1"><a href="climate-data-analysis.html#cb34-1"></a><span class="co">// make simple end of century classification</span></span>
<span id="cb34-2"><a href="climate-data-analysis.html#cb34-2"></a><span class="kw">var</span> globmean <span class="op">=</span> eocmean<span class="op">.</span><span class="fu">reduceRegion</span>(ee<span class="op">.</span><span class="at">Reducer</span><span class="op">.</span><span class="fu">mean</span>()<span class="op">,</span> glob<span class="op">,</span> <span class="dv">50000</span>)   <span class="co">// get global averages for EOC</span></span>
<span id="cb34-3"><a href="climate-data-analysis.html#cb34-3"></a><span class="kw">var</span> dryhot  <span class="op">=</span> eocmean<span class="op">.</span><span class="fu">select</span>(<span class="st">&#39;pr85&#39;</span>)<span class="op">.</span><span class="fu">lt</span>(<span class="dv">0</span>)</span>
<span id="cb34-4"><a href="climate-data-analysis.html#cb34-4"></a>            <span class="op">.</span><span class="fu">and</span>(eocmean<span class="op">.</span><span class="fu">select</span>(<span class="st">&#39;tas85&#39;</span>)<span class="op">.</span><span class="fu">gte</span>(ee<span class="op">.</span><span class="at">Image</span><span class="op">.</span><span class="fu">constant</span>(globmean<span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;tas85&#39;</span>))))</span>
<span id="cb34-5"><a href="climate-data-analysis.html#cb34-5"></a><span class="kw">var</span> drycold <span class="op">=</span> eocmean<span class="op">.</span><span class="fu">select</span>(<span class="st">&#39;pr85&#39;</span>)<span class="op">.</span><span class="fu">lt</span>(<span class="dv">0</span>)</span>
<span id="cb34-6"><a href="climate-data-analysis.html#cb34-6"></a>            <span class="op">.</span><span class="fu">and</span>(eocmean<span class="op">.</span><span class="fu">select</span>(<span class="st">&#39;tas85&#39;</span>)<span class="op">.</span><span class="fu">lt</span>(ee<span class="op">.</span><span class="at">Image</span><span class="op">.</span><span class="fu">constant</span>(globmean<span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;tas85&#39;</span>))))</span>
<span id="cb34-7"><a href="climate-data-analysis.html#cb34-7"></a><span class="kw">var</span> wethot  <span class="op">=</span> eocmean<span class="op">.</span><span class="fu">select</span>(<span class="st">&#39;pr85&#39;</span>)<span class="op">.</span><span class="fu">gte</span>(<span class="dv">0</span>)</span>
<span id="cb34-8"><a href="climate-data-analysis.html#cb34-8"></a>            <span class="op">.</span><span class="fu">and</span>(eocmean<span class="op">.</span><span class="fu">select</span>(<span class="st">&#39;tas85&#39;</span>)<span class="op">.</span><span class="fu">gte</span>(ee<span class="op">.</span><span class="at">Image</span><span class="op">.</span><span class="fu">constant</span>(globmean<span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;tas85&#39;</span>))))</span>
<span id="cb34-9"><a href="climate-data-analysis.html#cb34-9"></a><span class="kw">var</span> wetcold <span class="op">=</span> eocmean<span class="op">.</span><span class="fu">select</span>(<span class="st">&#39;pr85&#39;</span>)<span class="op">.</span><span class="fu">gte</span>(<span class="dv">0</span>)</span>
<span id="cb34-10"><a href="climate-data-analysis.html#cb34-10"></a>            <span class="op">.</span><span class="fu">and</span>(eocmean<span class="op">.</span><span class="fu">select</span>(<span class="st">&#39;tas85&#39;</span>)<span class="op">.</span><span class="fu">lt</span>(ee<span class="op">.</span><span class="at">Image</span><span class="op">.</span><span class="fu">constant</span>(globmean<span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;tas85&#39;</span>))))</span>
<span id="cb34-11"><a href="climate-data-analysis.html#cb34-11"></a><span class="kw">var</span> classes <span class="op">=</span> ee<span class="op">.</span><span class="at">Image</span><span class="op">.</span><span class="fu">constant</span>(<span class="dv">0</span>)<span class="op">.</span><span class="fu">byte</span>()</span>
<span id="cb34-12"><a href="climate-data-analysis.html#cb34-12"></a>            <span class="op">.</span><span class="fu">where</span>(dryhot<span class="op">,</span><span class="dv">0</span>)<span class="op">.</span><span class="fu">where</span>(drycold<span class="op">,</span><span class="dv">1</span>)<span class="op">.</span><span class="fu">where</span>(wethot<span class="op">,</span><span class="dv">2</span>)<span class="op">.</span><span class="fu">where</span>(wetcold<span class="op">,</span><span class="dv">3</span>)</span>
<span id="cb34-13"><a href="climate-data-analysis.html#cb34-13"></a>            <span class="op">.</span><span class="fu">updateMask</span>(wmask<span class="op">.</span><span class="fu">eq</span>(<span class="dv">0</span>))</span>
<span id="cb34-14"><a href="climate-data-analysis.html#cb34-14"></a><span class="kw">var</span> classnames  <span class="op">=</span> [<span class="st">&#39;dryer and relatively hot&#39;</span><span class="op">,</span><span class="st">&#39;dryer and relatively cold&#39;</span><span class="op">,</span></span>
<span id="cb34-15"><a href="climate-data-analysis.html#cb34-15"></a>                <span class="st">&#39;wetter and relatively hot&#39;</span><span class="op">,</span><span class="st">&#39;wetter and relatively cold&#39;</span>]</span>
<span id="cb34-16"><a href="climate-data-analysis.html#cb34-16"></a><span class="kw">var</span> classcolors <span class="op">=</span> [<span class="st">&#39;#f76754&#39;</span><span class="op">,</span><span class="st">&#39;#f7c054&#39;</span><span class="op">,</span> <span class="st">&#39;#2f6837&#39;</span><span class="op">,</span><span class="st">&#39;#3d8ca0&#39;</span>]</span>
<span id="cb34-17"><a href="climate-data-analysis.html#cb34-17"></a><span class="bu">Map</span><span class="op">.</span><span class="fu">addLayer</span>(classes<span class="op">,</span> {<span class="dt">min</span><span class="op">:</span><span class="dv">0</span><span class="op">,</span><span class="dt">max</span><span class="op">:</span><span class="dv">3</span><span class="op">,</span><span class="dt">palette</span><span class="op">:</span>classcolors}<span class="op">,</span> <span class="st">&#39;EOC classes&#39;</span>)</span>
<span id="cb34-18"><a href="climate-data-analysis.html#cb34-18"></a>lg<span class="op">.</span><span class="fu">classLegend</span>(<span class="kw">undefined</span><span class="op">,</span> classnames<span class="op">,</span> classcolors<span class="op">,</span><span class="st">&#39;EOC classes&#39;</span>)</span></code></pre></div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="regression.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="additional-cases.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true,
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
